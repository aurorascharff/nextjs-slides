/* nextjs-slides — Slide transition animations and code theme tokens */

/* Default code theme — override --sh-* and --nxs-code-* in :root or .dark */
:root {
  --nxs-code-bg: #ffffff;
  --nxs-code-border: #eaeaea;
  --nxs-code-text: #24292e;
  --sh-keyword: #d73a49;
  --sh-string: #032f62;
  --sh-property: #005cc5;
  --sh-class: #6f42c1;
  --sh-entity: #6f42c1;
  --sh-tag: #22863a;
  --sh-identifier: #24292e;
  --sh-literal: #005cc5;
  --sh-comment: #6a737d;
  --sh-sign: #24292e;
}

.dark {
  --nxs-code-bg: #0a0a0a;
  --nxs-code-border: #262626;
  --nxs-code-text: #ededed;
  --sh-keyword: #ff7b72;
  --sh-string: #a5d6ff;
  --sh-property: #79c0ff;
  --sh-class: #d2a8ff;
  --sh-entity: #d2a8ff;
  --sh-tag: #7ee787;
  --sh-identifier: #ededed;
  --sh-literal: #79c0ff;
  --sh-comment: #7a7a7a;
  --sh-sign: #ededed;
}

/* Slide container overflow containment */
.nxs-slide {
  overflow: hidden;
}

.nxs-slide-split-col {
  min-width: 0;
  width: 50%;
  overflow-x: auto;
}

/* Split layout: stack columns below 1024px */
@media (max-width: 1023px) {
  .nxs-slide-split {
    flex-direction: column;
    overflow-y: auto;
    overflow-x: hidden;
  }

  .nxs-slide-split .nxs-slide-split-col {
    width: 100% !important;
    max-width: 100% !important;
    flex: 1 1 auto;
  }

  .nxs-slide-split .nxs-slide-split-divider {
    display: none;
  }
}

/* Code block wrapper — constrains width so code doesn't blow out the slide */
.nxs-code-wrapper {
  min-width: 0;
  width: 100%;
  max-width: 42rem;
}

/* Map highlight.js to theme variables (all overwritable via --sh-*) */
.nxs-code-block {
  background: var(--nxs-code-bg);
  border: 1px solid var(--nxs-code-border);
  color: var(--nxs-code-text);
  font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
  font-size: clamp(0.75rem, 1.5vw + 0.5rem, 0.875rem);
  line-height: 1.7;
  text-align: left;
  min-width: 0;
  width: 100%;
  max-width: 100%;
  overflow-x: auto;
  padding: 1rem;
}

@media (min-width: 640px) {
  .nxs-code-block {
    padding: 1.5rem;
  }
}
.nxs-code-block .hljs-keyword,
.nxs-code-block .hljs-literal { color: var(--sh-keyword); }
.nxs-code-block .hljs-string { color: var(--sh-string); }
.nxs-code-block .hljs-number { color: var(--sh-literal); }
.nxs-code-block .hljs-comment { color: var(--sh-comment); }
.nxs-code-block .hljs-title.class_ { color: var(--sh-class); }
.nxs-code-block .hljs-title.function_ { color: var(--sh-entity); }
.nxs-code-block .hljs-attr,
.nxs-code-block .hljs-attribute,
.nxs-code-block .hljs-params { color: var(--sh-property); }
.nxs-code-block .hljs-built_in,
.nxs-code-block .hljs-variable { color: var(--sh-identifier); }
.nxs-code-block .hljs-name,
.nxs-code-block .hljs-tag .hljs-name { color: var(--sh-tag); }
.nxs-code-block .hljs-tag { color: var(--sh-sign); }
.nxs-code-block .hljs-punctuation,
.nxs-code-block .hljs-operator { color: var(--sh-sign); }


/* Slide transition keyframes */
@keyframes nxs-fade {
  from {
    filter: blur(3px);
    opacity: 0;
  }
  to {
    filter: blur(0);
    opacity: 1;
  }
}

@keyframes nxs-slide {
  from {
    translate: var(--nxs-slide-offset);
  }
  to {
    translate: 0;
  }
}

@keyframes nxs-slide-in {
  from {
    opacity: 0;
    transform: translateX(var(--nxs-slide-offset, 60px));
  }
}

@keyframes nxs-slide-out {
  to {
    opacity: 0;
    transform: translateX(var(--nxs-slide-offset, -60px));
  }
}

@keyframes nxs-deck-unveil {
  to {
    opacity: 0;
    transform: scale(1.03);
  }
}

/* Reset default view transition animations */
::view-transition-old(*) {
  animation: none;
}
::view-transition-new(*) {
  animation: none;
}

/* Slide forward */
::view-transition-new(.slide-from-right) {
  --nxs-slide-offset: 60px;
  animation: nxs-slide-in 200ms ease-out both;
}
::view-transition-old(.slide-to-left) {
  --nxs-slide-offset: -60px;
  animation: nxs-slide-out 200ms ease-out both;
}

/* Slide backward */
::view-transition-new(.slide-from-left) {
  --nxs-slide-offset: -60px;
  animation: nxs-slide-in 200ms ease-out both;
}
::view-transition-old(.slide-to-right) {
  --nxs-slide-offset: 60px;
  animation: nxs-slide-out 200ms ease-out both;
}

/* Deck exit (leaving slide deck) */
::view-transition-old(.deck-unveil) {
  animation: nxs-deck-unveil 300ms ease-out both;
}
::view-transition-new(.deck-unveil) {
  animation: none;
}
